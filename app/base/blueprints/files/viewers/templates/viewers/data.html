
<div class="card" style="padding:10px; overflow:auto; display: flex; flex-direction:row; ">
    <div id="data_tree_div_ip" style="width:100%; overflow:auto; margin-right:10px;"></div>
</div>
<script>

$(document).ready( function () {

$('#data_tree_div_ip').jstree(
{
  "core" : {
    "animation" : 0,
    "check_callback" : true,
    "themes" : { "stripes" : true },
    'data' : {
      url : function (node) {
        if (node.id === "#")
            return  '/files/viewers/data_root/{{fileId}}';
        return  '/files/data';
      },
      data : function (node) {
        if (node.id === "#")
            return  { "ipid" : {{dataId}} };
        return { 'fileId':node.li_attr.fileId , nodeId : node.li_attr.nodeId  };
      },
      dataType : "json"
    }
  },
  "plugins" : [
    "contextmenu", "dnd", "search",
    "state", "types", "wholerow"
  ]
});

$("#data_tree_div_ip").jstree("open_all");

$("#jmes_query").change(function() {
  $.get('/files/viewers/jmes-query?fileId={{fileId}}&dataId={{dataId}}&query=' + encodeURIComponent($(this).val()) , function(data) {
    $('#jmes_query_result').html(data);
  });
});

});
</script>